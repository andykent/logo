!!! 5
%html
  %head
    %title Logo
    %link{:href => to("/stylesheets/app.css"), :media => "screen", :rel => "stylesheet", :type => "text/css"}

    %script{:src => to("/javascripts/jquery.js"), :type => "text/javascript"}
    %script{:src => to("/javascripts/logo.js"), :type => "text/javascript"}
    :javascript
      jQuery(document).ready(function() {
        
        var context = function() {
          return document.getElementById("turtle").getContext("2d");
        };
        
        var turtle = logo.turtle({x: 300, y: 300});
        turtle.draw(context());
        
        
        var moveUp = function(context) {
        
           turtle.moveForward(100);
           
           console.log("After move forward");
           console.log(turtle.asString());
        }; 
         
         
        jQuery(".console").keypress(function(event) {
          if ( event.which == 13 ) {
            var command = jQuery(this).val();
            
            if (command.match(/^FORWARD/)) {
              console.log("Got the forward command")
              moveUp(context());
            }
            
            if (command.match(/^BACK/)) {
              turtle.moveBack(100);
            }
            console.log("The command is: " + command);
            jQuery(this).val("");
            
            context().clearRect(0, 0, 1000, 750);
            turtle.draw(context());
          }
        });
      });
      
  %body
    %canvas{:id => "turtle", :width => 1000, :height => 750}
    %section.instructions
      %h1 Commands
      %ul.commands
        %li FORWARD
        %li BACK
        %li RIGHT
        %li LEFT
        %li PU - pen up
        %li PD - pen down
    %section.cli
      %label{:for => "console"} Please type your command below and press [Enter]:
      %div 
        %span.prompt >
        %input.console{:id => "console", :type => "text"}
